# üìÜ –°–µ—Ä–≤–∏—Å "–ö–∞–ª–µ–Ω–¥–∞—Ä—å" (Calendar Engine)

---

[1. –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#title1)  
[2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#title2)  
[3. –û—Ü–µ–Ω–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏](#title3)  
[4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞](#title4)  
[5. –°—Ç–∞—Ç—É—Å—ã –∏ —Ä–æ–ª–∏](#title5)  
[6. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#title6)  
[7. –ê–¥–º–∏–Ω–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö](#title7)  
[8. –Ø–¥—Ä–æ —Å–µ—Ä–≤–∏—Å–∞](#title8)  
[9. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤](#title9)  
[10. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã](#title10)  
[11. API –∏ WEB –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å](#title11)

---

## <a id="title1"> ‚ÑπÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ </a>

- –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ–ª—å –≤—Ä–µ–º–µ–Ω–∏:
    - –ë–∞–∑–æ–≤–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–æ–º–µ–Ω–æ–º (Domain Time Policy - –ø—Å–∏—Ö–æ–ª–æ–≥–∏, —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã, –∫–æ—É—á–∏, etc.),
      –∞ –Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –Ω–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.  
      *–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è "–ê–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–æ–≤" –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ - 60 –º–∏–Ω (–°–ª–æ—Ç—ã: 00:00, 01:00, 02:00, ... 23:00), –∞ –¥–ª—è
      –∫–æ—É—á–µ–π –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å - 120 –º–∏–Ω, etc.*
    - –†–∞–±–æ—á–∏–π –≥—Ä–∞—Ñ–∏–∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –¥–æ–º–µ–Ω–µ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.  
      *–ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏: –ü–Ω-–°–±, —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è: 14:00-22:00, —Å–µ—Å—Å–∏—è: 50 –º–∏–Ω, –ø–µ—Ä–µ—Ä—ã–≤ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏: 20 –º–∏–Ω.*
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π/—Å–ª–æ—Ç–æ–≤ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞/–∫–ª–∏–µ–Ω—Ç–∞;
- –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å–æ–±—ã—Ç–∏–π: —Ä–∞–∑–æ–≤—ã–µ/–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ/–≥—Ä—É–ø–ø–æ–≤—ã–µ, —Å–æ—Å—Ç–∞–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–∫—É—Ä—Å—ã);
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–±—ã—Ç–∏–π: –ª–∏–º–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º, –≤–∏–¥–∏–º–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, etc.;
- –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏—è/—Å–ª–æ—Ç–∞ - —Å–æ–∑–¥–∞–Ω–∏–µ, –ø–µ—Ä–µ–Ω–æ—Å, –æ—Ç–º–µ–Ω–∞, etc.;
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—á–∞—Å—Ç–∏—è –∏–ª–∏ –æ—Ç–∫–∞–∑ –æ—Ç –Ω–µ–≥–æ, etc.;
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ UI –∫–∞–ª–µ–Ω–¥–∞—Ä—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã;
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏;
- –û—Ü–µ–Ω–∫–∞ –≤—Å—Ç—Ä–µ—á–∏/–æ—Ç–∑—ã–≤;

### 1. **–ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ –ª–µ—Ç—É —Å —è–≤–Ω—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º "Availability Rule" –∏ "Availability Exception",
–±–µ–∑ –º–∞—Å—Å–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å–ª–æ—Ç–æ–≤ –≤ –ë–î:

- ‚ùå –ù–ï —Å–æ–∑–¥–∞–µ–º –∏ –Ω–µ —Ö—Ä–∞–Ω–∏–º –≤—Å–µ —Å–ª–æ—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ —É –∫–∞–∂–¥–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞;
- ‚úÖ –•—Ä–∞–Ω–∏–º –±–∞–∑–æ–≤—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–µ—Ç–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ (–ø—Å–∏—Ö–æ–ª–æ–≥–∏, —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä—ã, –∫–æ—É—á–∏ –∏ —Ç.–¥.);
- ‚úÖ –•—Ä–∞–Ω–∏–º –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –≤ –¥–æ–º–µ–Ω–µ: —Ç–∞–π–º–∑–æ–Ω–∞, —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏, —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã, –≤—ã—Ö–æ–¥–Ω—ã–µ, –ø—Ä–∞–≤–∏–ª–∞
  –æ—Ç–ø—É—Å–∫–∞/–±–æ–ª—å–Ω–∏—á–Ω–æ–≥–æ, –ø–µ—Ä–µ—Ä—ã–≤ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ;
- ‚ùå –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –Ω–µ –¥–æ–ª–∂–Ω—ã –Ω–∞–≤—è–∑—ã–≤–∞—Ç—å —Å–µ—Ç–∫—É –¥–æ–º–µ–Ω–∞, –∞ –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±–æ–π —Å–µ—Ç–∫–æ–π;
- ‚úÖ –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (—Ç.–µ. –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è);
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã —Å—á–∏—Ç–∞–µ–º –Ω–∞ –ª–µ—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π;
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å + —É—á–∏—Ç—ã–≤–∞–µ–º —Ç–∞–π–º–∑–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é –∑–∞ —Å–ª–æ—Ç (race condition). –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: "–¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—ã—Ç–∞—é—Ç—Å—è
  –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Å–ª–æ—Ç —É –æ–¥–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞";
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏:
    1) –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ (1:1)
    2) –ì—Ä—É–ø–ø–æ–≤—ã–µ –≤—Å—Ç—Ä–µ—á–∏
    3) –°–æ—Å—Ç–∞–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (multi-slot):
    ```text
    Event: "–ö—É—Ä—Å"
      Slots:
        12 –º–∞—è 11:00‚Äì12:00
        19 –º–∞—è 14:00‚Äì15:00
        26 –º–∞—è 09:00‚Äì10:00
    ```
    4) –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–±—ã—Ç–∏—è
    5) –†–∞–∑–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ª–æ—Ç–∞—Ö
    6) –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –¥–æ–º–µ–Ω—ã (–ø—Å–∏—Ö–æ–ª–æ–≥–∏—è, –æ–±—É—á–µ–Ω–∏–µ, –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥ –∏ —Ç.–¥.)
    7) –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ —Å–æ–±—ã—Ç–∏—è:
    ```text
    Event: "–ö—É—Ä—Å"
        Slot 1: finished
        Slot 2: cancelled
        Slot 3: planned
    ```
- ‚úÖ –°—Ä–∞–∑—É –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏: GoogleCalendar / AppleCalendar / Outlook

### 2. **–ö–ª—é—á–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∏–¥–µ—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è**:

- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–µ –ø—Ä–æ —Å–ª–æ—Ç—ã, –∞ –ø—Ä–æ —Å–æ–±—ã—Ç–∏—è + –ø—Ä–∞–≤–∏–ª–∞ –≤—Ä–µ–º–µ–Ω–∏.
- ‚ö†Ô∏è Availability-—Å–ª–æ—Ç—ã - —ç—Ç–æ UI-–ø—Ä–æ–µ–∫—Ü–∏—è, –∞ –Ω–µ —Å—É—â–Ω–æ—Å—Ç—å –ë–î.
- ‚ö†Ô∏è TimeSlot - —ç—Ç–æ –∞—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏ **—Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è**, –∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏.
- ‚ùå –ï—Å–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ—Ç—ã –∫–∞–∫ –∑–∞—Ä–∞–Ω–µ–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –ë–î:
    - —Ç–µ—Ä—è–µ—Ç—Å—è –≥–∏–±–∫–æ—Å—Ç—å
    - —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏
    - –ø–æ–ª—É—á–∞–µ–º –≤–∑—Ä—ã–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ –ë–î
    - —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∞–≤–∏–ª –ø—Ä–∏ –∏—Ö –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ (–¥–ª–∏–Ω–∞ —Å–µ—Å—Å–∏–∏, –ø–µ—Ä–µ—Ä—ã–≤—ã, —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—á–µ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞,
      –ø—Ä–∞–≤–∏–ª–∞ –æ—Ç–ø—É—Å–∫–∞)

---

## <a id="title2"> ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ </a>

| –¶–µ–ª—å                                     | –ü–∞–∫–µ—Ç                                                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                        |
|------------------------------------------|-----------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Backend                                  | `Python`, `Django`, `Django REST Framework (DRF)` + `JWT` | 1) –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: —Å–ª–æ—Ç—ã –∏ —Ä–∞–±–æ—Ç–∞ —Å –Ω–∏–º–∏ (–±—Ä–æ–Ω—å, –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ, –ø–µ—Ä–µ–Ω–æ—Å, –æ—Ç–º–µ–Ω–∞, –∞—Ä—Ö–∏–≤) <br/> 2) –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å API —á–µ—Ä–µ–∑ JWT-—Ç–æ–∫–µ–Ω |
| SSR (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥)                          | `Django Templates`                                        | –°—Ç—Ä–∞–Ω–∏—Ü—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º (Server-Side Rendering)                                                                                                          |
| CSS/HTML                                 | `Tailwind`, `Flowbite`                                    | MVP UI –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ SPA - —á–µ—Ä–µ–∑ Django templates / SSR - —ç—Ç–æ Server-side rendering (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Django)                                   |
| Frontend                                 | `FullCalendar.js`                                         | JS-–∫–∞–ª–µ–Ω–¥–∞—Ä—å (–µ—Å—Ç—å drag&drop, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–±—ã—Ç–∏–π, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤)                                                                                     |
| JavaScript                               | `Vanilla JS`, `Fetch API`                                 | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤: autosave —á–µ–≥–æ-—Ç–æ –≤ –ë–î, AJAX, –ª–æ–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å)                                                                       |
| –ë–î                                       | `PostgreSQL`                                              | –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö                                                                                                                                       |
| –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π                     | `django-notifications-hq`                                 | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º (–≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - ?)                                                                                                               |
| Email / SMS                              | `SMTP (–Ø–Ω–¥–µ–∫—Å 360)`                                       | –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (–≤–Ω–µ—à–Ω–∏–µ - ?)                                                                                                                                       |
| –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è) | `Celery` + `Redis`                                        | –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (—Ä–∞—Å—Å—ã–ª–∫–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è)                                                                                                             |
| –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏                     | `Celery-beat`                                             | ?                                                                                                                                                               |
| –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã                           | `pytz`, `django-timezone-field`, `zoneinfo` - ?           | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤                                                                                                               |
| –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏                          | `dateutil`                                                | ?                                                                                                                                                               |
| Google Calendar                          | `google-api-python-client`, `django-ical`                 | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏ / –ü–æ–∑–≤–æ–ª—è–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ .ics.                                                       |

Redis –Ω—É–∂–µ–Ω –¥–ª—è:

- –∫—ç—à availability –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (7 –¥–Ω–µ–π)
- –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
- debouncing –∑–∞–ø—Ä–æ—Å–æ–≤ UI

---

## <a id="title3"> üèã –û—Ü–µ–Ω–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ </a>

### 1. –û—Ä–∏–µ–Ω—Ç–∏—Ä –ø–æ –º–∞—Å—à—Ç–∞–±—É:

| –ú–∞—Å—à—Ç–∞–±            | –û—Ü–µ–Ω–∫–∞                     |
|--------------------|----------------------------|
| 10k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  | –¥–∞–∂–µ –Ω–µ —Ä–∞–∑–º–∏–Ω–∫–∞           |
| 100k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | **–∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ**              |
| 500k –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –Ω—É–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∏–Ω–¥–µ–∫—Å–∞–º–∏ |
| 1M+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  | –Ω—É–∂–Ω—ã read replicas        |
| 5M+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  | partitioning –ø–æ –≤—Ä–µ–º–µ–Ω–∏    |

üî∑ –ò–¢–û–ì:  
–í—ã–±—Ä–∞–Ω–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è/–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –¥–ª—è SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è
—Ç–∞–±–ª–∏—Ü—ã "–≤—Å–µ—Ö —Å–ª–æ—Ç–æ–≤" (—ç—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç).

–ú—ã:

- –ù–ï —Å–æ–∑–¥–∞–µ–º –º–∏–ª–ª–∏–æ–Ω—ã –ø—É—Å—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤
- —Å—á–∏—Ç–∞–µ–º –∏—Ö –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
- —Ö—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç—ã

–ü—Ä–∏–º–µ—Ä, —ç—Ç–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É:

- ‚ùå ‚ÄúGoogle Calendar 2005‚Äù
- ‚úÖ ‚ÄúGoogle Calendar 2025‚Äù

### 2. –ï—Å–ª–∏ —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —É—Ä–æ–≤–Ω–µ *"–∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ"* —Å–æ —Å—Ä–µ–¥–Ω–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏:

| –¢–∞–±–ª–∏—Ü–∞                                            | –°—Ç—Ä–æ–∫                |
|----------------------------------------------------|----------------------|
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏                                       | 100k **(–∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ)** |
| –í—Å—Ç—Ä–µ—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π                              | 10 –º–ª–Ω               |
| –°–ª–æ—Ç—ã –¥–ª—è –≤—Å—Ç—Ä–µ—á (—É—á–∏—Ç—ã–≤–∞—è —Å–æ—Å—Ç–∞–≤–Ω—ã–µ —Å multi-slot) | 15 –º–ª–Ω               |
| –£—á–∞—Å—Ç–Ω–∏–∫–∏                                          | 30 –º–ª–Ω               |
| –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏                                | <1 –º–ª–Ω               |

üî∑ –ò–¢–û–ì: —ç—Ç–æ –º–∞—Å—à—Ç–∞–± —Å—Ä–µ–¥–Ω–µ-–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ SaaS.

### 3. –û—Ü–µ–Ω–∫–∞ –ø–æ—Ç–æ–ª–∫–∞:

- 100 000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —ç—Ç–æ –≤–æ–æ–±—â–µ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏/–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏.
- **–†–µ–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–ª–æ–∫:** 1-3 –º–ª–Ω –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –µ—Å–ª–∏:
    - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –≤ –º–æ–¥–µ–ª—è—Ö
    - —Å–ª–æ—Ç—ã —Å—á–∏—Ç–∞—é—Ç—Å—è on-the-fly
    - –Ω–µ—Ç N+1 –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –≤ –ë–î
    - Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ cache, –∞ –Ω–µ –ë–î
- –£–∑–∫–∏–µ –º–µ—Å—Ç–∞ –Ω–µ –≤ –º–æ–¥–µ–ª—è—Ö/–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∞:
    - –≤ –Ω–µ–∞–∫–∫—É—Ä–∞—Ç–Ω—ã—Ö ORM-–∑–∞–ø—Ä–æ—Å–∞—Ö
    - –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ—Ç–æ–≤ –±–µ–∑ –±–∞—Ç—á–∏–Ω–≥–∞  
      *–ë–∞—Ç—á–∏–Ω–≥ (–æ—Ç –∞–Ω–≥–ª. batch - –ø–∞—Ä—Ç–∏—è, –≥—Ä—É–ø–ø–∞) - —ç—Ç–æ –º–µ—Ç–æ–¥ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
      –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á –∏–ª–∏ –ø–æ—Ä—Ü–∏–π –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–∏–Ω –æ–±—â–∏–π "–ø–∞–∫–µ—Ç" –¥–ª—è –∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)*
    - –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ read-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## <a id="title4"> ‚õìÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞ </a>

```bash
calendar_engine/
    ‚îú‚îÄ‚îÄ apps.py
    ‚îú‚îÄ‚îÄ constants.py                  # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–º–µ–Ω–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ (–±–∞–∑–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Å–ª–æ—Ç–æ–≤) + –∑–Ω–∞—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤
    ‚îú‚îÄ‚îÄ models.py
    ‚îú‚îÄ‚îÄ admin.py
    ‚îú‚îÄ‚îÄ urls.py
    ‚îÇ
    ‚îú‚îÄ‚îÄ domain/                       # ‚≠ê –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–ù–ï Django)
    ‚îÇ    ‚îú‚îÄ‚îÄ time_policy/               # –î–û–ú–ï–ù–ù–´–ï –ø—Ä–∞–≤–∏–ª–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ base.py                 # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç TimePolicy (–¥–æ–º–µ–Ω–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞)
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ policy.py               # üí° –û—Å–Ω–æ–≤–Ω–∞—è DomainTimePolicy –¥–æ–º–µ–Ω–∞ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏)
    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ exceptions.py           # –ë–∏–∑–Ω–µ—Å-–∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏ (Domain Business Exceptions)
    ‚îÇ    ‚îÇ
    ‚îÇ    ‚îú‚îÄ‚îÄ availability/              # –ß–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ base.py                   # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã AvailabilityRule –∏ AvailabilityException
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ user_rules.py             # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ - AvailabilityRule
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ user_exceptions.py        # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–∞–≤–∏–ª (day-off, –æ—Ç–ø—É—Å–∫, –±–æ–ª—å–Ω–∏—á–Ω—ã–π) - AvailabilityException
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ dto.py                    # SlotDTO
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ domain_slot_generator.py  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ–º–µ–Ω–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ get_user_slots.py         # üí° –§–∏–ª—å—Ç—Ä –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ –µ–≥–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ SlotDTO, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–Ω—è)
    ‚îÇ    ‚îÇ
    ‚îÇ    ‚îî‚îÄ‚îÄ matching/                  # –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è time_policy –∏ availability
    ‚îÇ         ‚îú‚îÄ‚îÄ dto.py                  # MatchResultDTO
    ‚îÇ         ‚îú‚îÄ‚îÄ base.py                 # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ matching
    ‚îÇ         ‚îî‚îÄ‚îÄ matcher.py              # üí° –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π matcher - –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã —É –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
    ‚îÇ
    ‚îú‚îÄ‚îÄ application/                  # ‚≠ê –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    ‚îÇ    ‚îú‚îÄ‚îÄ use_cases/
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ base.py                             # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –±–∞–∑–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ use-cases
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ get_domain_slots_use_case.py        # Use-case –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç—É –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–æ–º–µ–Ω–∞ (–æ–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–º–µ–Ω–∞) 
    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ generate_and_match_availability.py  # Use-case –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ matching –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
    ‚îÇ    ‚îÇ
    ‚îÇ    ‚îú‚îÄ‚îÄ mappers/
    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ availability_rule_mapper.py         # –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç django-–æ–±—ä–µ–∫—Ç AvailabilityRule –≤ –¥–æ–º–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è factories
    ‚îÇ    ‚îÇ    
    ‚îÇ    ‚îî‚îÄ‚îÄ factories/
    ‚îÇ         ‚îî‚îÄ‚îÄ generate_and_match_factory.py       # üí° –ò–¢–û–ì–û–í–´–ô –ü–û–î–ë–û–† –°–ü–ï–¶–ò–ê–õ–ò–°–¢–û–í (—ç—Ç–æ composition layer, –∞ –Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤ use-case) - —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç use-cases, –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ "–°–ü–ï–¶–ò–ê–õ–ò–°–¢–ê + –í–´–ë–†–ê–ù–ù–´–ï –ö–õ–ò–ï–ù–¢–û–ú "–°–õ–û–¢–´" –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ü–û–î–ë–û–†
    ...
```

---

## <a id="title5"> üìå –°—Ç–∞—Ç—É—Å—ã –∏ —Ä–æ–ª–∏ </a>

–°—Ç–∞—Ç—É—Å–Ω–∞—è –º–æ–¥–µ–ª—å - –∫–ª—é—á–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è. –û–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, —Å–ª–æ—Ç–æ–≤ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∞ —Ç–∞–∫–∂–µ
–ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤—Ä–µ–º–µ–Ω–∏.

### 1. –°—Ç–∞—Ç—É—Å—ã —Å–æ–±—ã—Ç–∏–π (`CalendarEvent.status`)

| –°—Ç–∞—Ç—É—Å      | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
|-------------|-------------------------------------------------|
| `draft`     | –ß–µ—Ä–Ω–æ–≤–∏–∫, —Å–æ–±—ã—Ç–∏–µ –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ                |
| `planned`   | –°–æ–±—ã—Ç–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –∏ –∞–∫—Ç–∏–≤–Ω–æ                 |
| `started`   | –°–æ–±—ã—Ç–∏–µ –Ω–∞—á–∞–ª–æ—Å—å                                |
| `completed` | –°–æ–±—ã—Ç–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ                       |
| `cancelled` | –°–æ–±—ã—Ç–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ                                |
| `archived`  | –°–æ–±—ã—Ç–∏–µ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ) |

–ü—Ä–∏–Ω—Ü–∏–ø—ã:

- **–°–æ–±—ã—Ç–∏–µ** - —ç—Ç–æ –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç—å, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Å—Ç—Ä–µ—á—É
- –°–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ—Ç–æ–≤
- –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ, –∞ —Å—Ç–∞—Ä–æ–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ archived
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –≤—Ä–µ–º–µ–Ω–∏

### 2. –°—Ç–∞—Ç—É—Å—ã —Å–ª–æ—Ç–æ–≤ (`TimeSlot.status`)

| –°—Ç–∞—Ç—É—Å      | –û–ø–∏—Å–∞–Ω–∏–µ             |
|-------------|----------------------|
| `planned`   | –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ª–æ—Ç |
| `started`   | –°–ª–æ—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ      |
| `completed` | –°–ª–æ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω        |
| `cancelled` | –°–ª–æ—Ç –æ—Ç–º–µ–Ω–µ–Ω         |
| `archived`  | –°–ª–æ—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω   |

–ü—Ä–∏–Ω—Ü–∏–ø—ã:

- **–°–ª–æ—Ç** - —ç—Ç–æ –∞—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∏–º–µ–Ω–Ω–æ –æ–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- Double booking (–Ω–∞–ª–æ–∂–µ–Ω–∏–µ –≤—Å—Ç—Ä–µ—á) –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è —Å–ª–æ—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ planned –∏ started (—Ç.–µ., —Ç–æ–ª—å–∫–æ
  –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ (–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö/–Ω–∞—á–∞—Ç—ã—Ö). –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–ª–æ—Ç—ã (completed, canceled, archived) –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç
  –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ ExclusionConstraint –≤ PostgreSQL.

### 3. –†–æ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

#### 3.1. –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–æ–±—ã—Ç–∏—è (`EventParticipant`)

‚ñ∂Ô∏é –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –∏ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á, –∫—É—Ä—Å–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞–º–∏.

- **–†–æ–ª—å (role)**:
    - organizer
    - participant
    - moderator
    - observer

- **–°—Ç–∞—Ç—É—Å—ã (status):**
    - invited
    - accepted
    - declined
    - left

#### 3.2. –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–ª–æ—Ç–∞ (`SlotParticipant`)

‚ñ∂Ô∏é –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ—Å—Ç–∞–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –ø–æ —Å–ª–æ—Ç–∞–º. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: –∫—É—Ä—Å—ã,
—Ä–∞–∑–Ω—ã–µ –≥—Ä—É–ø–ø—ã –≤ —Ä–∞–∑–Ω—ã–µ –¥–Ω–∏, –ø–µ—Ä–µ–Ω–æ—Å –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏.

- **–†–æ–ª—å (role)**:
    - organizer
    - participant
    - speaker
    - moderator

- **–°—Ç–∞—Ç—É—Å—ã (status):**
    - planned
    - joined
    - left_early
    - attended
    - missed

---

## <a id="title6"> üóÑÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö </a>

–ü–µ—Ä–µ–¥ –º–æ–¥–µ–ª—è–º–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è 5 –±–∞–∑–æ–≤—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤:

- 1Ô∏è‚É£ **Event - –∞–≥—Ä–µ–≥–∞—Ç, Slot - –µ–≥–æ –∞—Ç–æ–º**
    - CalendarEvent - –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç—å
    - TimeSlot - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–µ–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ —Å–æ–±—ã—Ç–∏—è
    - Slot –Ω–µ –∂–∏–≤–µ—Ç —Å–∞–º –ø–æ —Å–µ–±–µ

- 2Ô∏è‚É£ **Availability ‚â† Booking**
    - AvailabilityRule + AvailabilityException - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–∞
    - CalendarEvent + TimeSlot - —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–±–æ—Ä–∞
    - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–º–µ—à–∏–≤–∞–µ–º

- 3Ô∏è‚É£ **–û–¥–∏–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—å - –º–Ω–æ–≥–æ —Ä–æ–ª–µ–π**
    - –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä
    - –£—á–∞—Å—Ç–Ω–∏–∫
    - –í—ã—Å—Ç—É–ø–∞—é—â–∏–π
    - –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä
    - –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å

- 4Ô∏è‚É£ **External-ready —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è**
    - –õ—é–±–æ–µ —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å:
        - internal
        - external (Google / Apple / Outlook)
    - –ò—Å—Ç–æ—á–Ω–∏–∫ - –∞—Ç—Ä–∏–±—É—Ç, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å

- 5Ô∏è‚É£ –ë–µ–∑ premature optimization
    - Redis - –∫–µ—à, –Ω–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
    - –ù–µ—Ç "—Ç–∞–±–ª–∏—Ü—ã –≤—Å–µ—Ö —Å–ª–æ—Ç–æ–≤"
    - –í—Å–µ —Å–ª–æ—Ç—ã - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞–≤–∏–ª + —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

### calendar_engine/models.py:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                           | –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è |
|----------------------------------|----------------------------------------------------------------------|-------------|
| `TimeStampedModel`               | –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è         | PostgreSQL  |
| `CalendarEvent`                  | –°–æ–±—ã—Ç–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è                                                    | PostgreSQL  |
| `RecurrenceRule`                 | –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π                                                   | PostgreSQL  |
| `TimeSlot`                       | –í—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–æ—Ç —Å–æ–±—ã—Ç–∏—è                                               | PostgreSQL  |
| `EventParticipant`               | –£—á–∞—Å—Ç–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è                                                     | PostgreSQL  |
| `SlotParticipant`                | –£—á–∞—Å—Ç–Ω–∏–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª–æ—Ç–∞ (–µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Å–æ–±—ã—Ç–∏—è)              | PostgreSQL  |
| `AvailabilityRule`               | –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: —Ä–∞–±–æ—á–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ                              | PostgreSQL  |
| `AvailabilityRuleTimeWindow`     | –ù–∞–±–æ—Ä —Ä–∞–±–æ—á–∏—Ö –æ–∫–æ–Ω –≤–Ω—É—Ç—Ä–∏ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (—Ä–∞—Å—à–∏—Ä—è–µ—Ç AvailabilityRule)  | PostgreSQL  |
| `AvailabilityException`          | –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è                                             | PostgreSQL  |
| `AvailabilityExceptionTimeWindow` | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã–π –Ω–∞–±–æ—Ä —Ä–∞–±–æ—á–∏—Ö –æ–∫–æ–Ω (—Ä–∞—Å—à–∏—Ä—è–µ—Ç AvailabilityException) | PostgreSQL  |

1. –ú–æ–¥–µ–ª—å `TimeStampedModel` (abstract):  
   –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

| –ü–æ–ª–µ         | –¢–∏–ø           | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|--------------|---------------|-------------------------------------------|
| `created_at` | DateTimeField | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏              |
| `updated_at` | DateTimeField | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ |

2. –ú–æ–¥–µ–ª—å `CalendarEvent`:  
   –ö–æ—Ä–µ–Ω—å –∞–≥—Ä–µ–≥–∞—Ç–∞ - —Å–æ–±—ã—Ç–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è. –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å 1 –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ (—Ç.–µ., –µ—Å–ª–∏ —Å–æ—Å—Ç–∞–≤–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ,
   —Ç–æ –±—É–¥–µ—Ç N-–∑–∞–ø–∏—Å–µ–π —Å –æ–¥–Ω–∏–º ID —Å–æ–±—ã—Ç–∏—è –∏ —Ä–∞–∑–Ω—ã–º–∏ ID —Å–ª–æ—Ç–æ–≤).

| –ü–æ–ª–µ               | –¢–∏–ø                  | –û–ø–∏—Å–∞–Ω–∏–µ                |
|--------------------|----------------------|-------------------------|
| `id`               | UUID                 | –ü—É–±–ª–∏—á–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| `creator`          | FK(AppUser)          | –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è     |
| `title`            | CharField            | –ù–∞–∑–≤–∞–Ω–∏–µ                |
| `description`      | TextField            | –û–ø–∏—Å–∞–Ω–∏–µ                |
| `event_type`       | CharField(choices)   | –¢–∏–ø —Å–æ–±—ã—Ç–∏—è             |
| `status`           | CharField(choices)   | –°—Ç–∞—Ç—É—Å                  |
| `cancel_reason`    | TextField            | –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã          |
| `visibility`       | CharField(choices)   | –í–∏–¥–∏–º–æ—Å—Ç—å               |
| `capacity`         | PositiveSmallInteger | –õ–∏–º–∏—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤        |
| `is_recurring`     | Boolean              | –ü–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è           |
| `previous_event_id` | FK(self)             | –°–≤—è–∑—å –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ      |
| `source`           | CharField            | –ò—Å—Ç–æ—á–Ω–∏–∫                |
| `external_id`      | CharField            | ID –≤–æ –≤–Ω–µ—à–Ω–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ |

3. –ú–æ–¥–µ–ª—å `RecurrenceRule`:  
   –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è —Å–æ–±—ã—Ç–∏—è.

| –ü–æ–ª–µ                  | –¢–∏–ø                  | –û–ø–∏—Å–∞–Ω–∏–µ                                       |
|-----------------------|----------------------|------------------------------------------------|
| `creator`             | FK(AppUser)          | –í–ª–∞–¥–µ–ª–µ—Ü                                       |
| `event`               | FK(CalendarEvent)    | –°–æ–±—ã—Ç–∏–µ                                        |
| `timezone`            | TimeZoneField        | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å                                   |
| `rule_start`          | DateField            | –ù–∞—á–∞–ª–æ                                         |
| `rule_end`            | DateField            | –ö–æ–Ω–µ—Ü                                          |
| `count_recurrences`   | SmallInt             | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª-–≤—É –ø–æ–≤—Ç–æ—Ä–Ω–µ–Ω–∏–π              |
| `frequency`           | CharField(choices)   | Daily / Weekly / Monthly                       |
| `interval`            | PositiveSmallInteger | –ò–Ω—Ç–µ—Ä–≤–∞–ª (1 - –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é, 2 - —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é) |
| `weekdays_recurrences` | Array(choices)       | –î–Ω–∏ –Ω–µ–¥–µ–ª–∏                                     |
| `is_active`           | Boolean              | –ü—Ä–∏–∑–Ω–∞–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∞–≤–∏–ª–∞                       |

4. –ú–æ–¥–µ–ª—å `TimeSlot`:  
   –ê—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤–Ω—É—Ç—Ä–∏ —Å–æ–±—ã—Ç–∏—è (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏, —á–∞—Å—Ç—å —Å–æ–±—ã—Ç–∏—è).
    - Slot - –Ω–µ availability
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞:
        - multi-slot
        - —Ä–∞–∑–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
        - –ø–µ—Ä–µ–Ω–æ—Å—ã
        - –∑–∞—â–∏—Ç–∞ –æ—Ç double booking (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —Å–ª–æ—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ creator)
    - slot_index - –¥–ª—è —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è (–∫—É—Ä—Å—ã –∏ —Å–µ—Ä–∏–∏)

| –ü–æ–ª–µ            | –¢–∏–ø                       | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|-----------------|---------------------------|------------------------------|
| `id`            | UUID                      | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä                |
| `creator`       | FK(AppUser)               | –í–ª–∞–¥–µ–ª–µ—Ü —Å–ª–æ—Ç–∞               |
| `event`         | FK(CalendarEvent)         | –°–æ–±—ã—Ç–∏–µ                      |
| `start_datetime` | DateTimeField             | –ù–∞—á–∞–ª–æ                       |
| `end_datetime`  | DateTimeField             | –ö–æ–Ω–µ—Ü                        |
| `status`        | CharField(choices)        | –°—Ç–∞—Ç—É—Å                       |
| `timezone`      | TimeZoneField             | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å                 |
| `meeting_url`   | URL                       | –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ-–∫–æ–º–Ω–∞—Ç—É      |
| `comment`       | TextField                 | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                  |
| `slot_index`    | PositiveSmallIntegerField | –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å–æ–±—ã—Ç–∏—è |

5. –ú–æ–¥–µ–ª—å `EventParticipant`:  
   –£—á–∞—Å—Ç–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è —Å —Ä–æ–ª—å—é –∏ —Å—Ç–∞—Ç—É—Å–æ–º.
    - –û–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ -> –º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -> –º–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏–π

| –ü–æ–ª–µ        | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ      |
|-------------|--------------------|---------------|
| `event`     | FK(CalendarEvent)  | –°–æ–±—ã—Ç–∏–µ       |
| `user`      | FK(AppUser)        | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å  |
| `joined_at` | DateTimeField      | –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è |
| `left_at`   | DateTimeField      | –í—ã—à–µ–ª         |
| `role`      | CharField(choices) | –†–æ–ª—å          |
| `status`    | CharField(choices) | –°—Ç–∞—Ç—É—Å        |

6. –ú–æ–¥–µ–ª—å `SlotParticipant`:  
   –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å–ª–æ—Ç–æ–º. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –ø–æ —Å–ª–æ—Ç–∞–º.  
   –í–∞–∂–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π —Å —Ä–∞–∑–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
   –ö–æ–≥–¥–∞ –∏ –≥–¥–µ –Ω—É–∂–Ω–æ:
    - –ö—É—Ä—Å—ã
    - –ì—Ä—É–ø–ø—ã
    - –ü–µ—Ä–µ–Ω–æ—Å—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏

| –ü–æ–ª–µ        | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ      |
|-------------|--------------------|---------------|
| `slot`      | FK(TimeSlot)       | –°–ª–æ—Ç          |
| `user`      | FK(AppUser)        | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å  |
| `joined_at` | DateTimeField      | –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è |
| `left_at`   | DateTimeField      | –í—ã—à–µ–ª         |
| `role`      | CharField(choices) | –†–æ–ª—å          |
| `status`    | CharField(choices) | –°—Ç–∞—Ç—É—Å        |

7. –ú–æ–¥–µ–ª—å `AvailabilityRule`:
    –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (—Ä–∞–±–æ—á–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ).
    –ù–∞–ø—Ä–∏–º–µ—Ä: –ü–Ω-–ü—Ç, —Å –Ω–∞–±–æ—Ä–æ–º —Ä–∞–±–æ—á–∏—Ö –æ–∫–æ–Ω –≤–Ω—É—Ç—Ä–∏ –¥–Ω—è (AvailabilityRuleTimeWindow).

| –ü–æ–ª–µ                     | –¢–∏–ø                       | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------------------|---------------------------|---------------------------------|
| `creator`                | FK(AppUser)               | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å                    |
| `timezone`               | TimeZoneField             | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å                    |
| `rule_start`             | Date                      | –ù–∞—á–∞–ª–æ                          |
| `rule_end`               | Date                      | –ö–æ–Ω–µ—Ü                           |
| `weekdays`               | Array(choices)            | –î–Ω–∏ –Ω–µ–¥–µ–ª–∏                      |
| `slot_duration`          | PositiveSmallIntegerField | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏ (–º–∏–Ω—É—Ç—ã)    |
| `break_between_sessions` | PositiveSmallIntegerField | –ü–µ—Ä–µ—Ä—ã–≤ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ (–º–∏–Ω—É—Ç—ã) |
| `is_active`              | Boolean                   | –ü—Ä–∏–∑–Ω–∞–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∞–≤–∏–ª–∞        |

8. –ú–æ–¥–µ–ª—å `AvailabilityRuleTimeWindow`:  
   –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –∏–∑ AvailabilityRule:
     - –æ–¥–Ω–æ –æ–∫–Ω–æ —Å 09:00 –¥–æ 18:00;
     - –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–∫–æ–Ω —Å 06:00 –¥–æ 11:00 –∏ —Å 16:00 –¥–æ 22:00.

| –ü–æ–ª–µ         | –¢–∏–ø                  | –û–ø–∏—Å–∞–Ω–∏–µ              |
|--------------|----------------------|-----------------------|
| `rule`       | FK(AvailabilityRule) | –ü—Ä–∞–≤–∏–ª–æ               |
| `start_time` | Time                 | –ù–∞—á–∞–ª–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ |
| `end_time`   | Time                 | –ö–æ–Ω–µ—Ü –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ |

9. –ú–æ–¥–µ–ª—å `AvailabilityException`:  
   –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (–æ—Ç–ø—É—Å–∫, –±–æ–ª–µ–∑–Ω—å, –≤—ã—Ö–æ–¥–Ω–æ–π)

| –ü–æ–ª–µ                  | –¢–∏–ø                 | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
|-----------------------|---------------------|-------------------------------------------------|
| `creator`             | FK(AppUser)         | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å                                    |
| `rule`                | FK(AvailabilityRule) | –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ |
| `exception_start`     | Date                | –î–∞—Ç–∞ —Å—Ç–∞—Ä—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è                 |
| `exception_end`       | Date                | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è              |
| `reason`              | CharField(choices)  | –í—ã–±–æ—Ä –ø—Ä–∏—á–∏–Ω—ã                                   |
| `exception_type`      | CharField(choices)  | –¢–∏–ø –∏—Å–∫–ª—é—á–µ–Ω–∏—è: unavailable / override          |
| `is_active`           | Boolean             | –ü—Ä–∏–∑–Ω–∞–∫ –¥–µ–π—Å—Ç–≤–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è                     |

10. –ú–æ–¥–µ–ª—å `AvailabilityExceptionTimeWindow`:  
   –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –∏–∑ AvailabilityException (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Å 09:00 –¥–æ 18:00").

| –ü–æ–ª–µ                              | –¢–∏–ø                       | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
|-----------------------------------|---------------------------|-------------------------------------------------------------------|
| `exception`                       | FK(AvailabilityException) | –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ |
| `override_start_time`             | Date                      | –ù–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è                  |
| `override_end_time`               | Date                      | –ù–æ–≤–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è               |
| `override_slot_duration`          | Time                      | –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 1 —Å–µ—Å—Å–∏–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–º–∏–Ω—É—Ç—ã)           |
| `override_break_between_sessions` | Time                      | –ü–µ—Ä–µ—Ä—ã–≤ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–º–∏–Ω—É—Ç—ã)               |

---

## <a id="title7"> üë©‚Äçüíª –ê–¥–º–∏–Ω–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö </a>

### calendar_engine/admins.py:

1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ (http://base_url/admin/) —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã Django.

2. –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–∫:
    - `CalendarEventAdmin`
    - `RecurrenceRuleAdmin`
    - `TimeSlotAdmin`
    - `EventParticipantAdmin`
    - `SlotParticipantAdmin`
    - `AvailabilityRuleAdmin`
    - `AvailabilityRuleTimeWindowAdmin`
    - `AvailabilityExceptionAdmin`
    - `AvailabilityExceptionTimeWindowAdmin`

---

## <a id="title8"> üöÄ –Ø–¥—Ä–æ —Å–µ—Ä–≤–∏—Å–∞ </a>

## 1Ô∏è‚É£ domain/time_policy/ - –¥–æ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏ (–æ–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- –ó–∞–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–µ—Ç–∫—É –¥–æ–º–µ–Ω–∞, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä–æ–π availability –±—É–¥–µ—Ç:
    - –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è
    - —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã
    - –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ –∑–Ω–∞—Ç—å –Ω–∏—á–µ–≥–æ –ø—Ä–æ:
    - –ø—Ä–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –ø—Ä–æ AvailabilityRule –∏ AvailabilityExpectation —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –ø—Ä–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    - –ø—Ä–æ —Å–æ–±—ã—Ç–∏—è
- –ë—ã—Ç—å —á–∏—Å—Ç–æ–π domain-–ª–æ–≥–∏–∫–æ–π - –æ–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–º–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
calendar_engine/domain/time_policy/
‚îú‚îÄ‚îÄ base.py                 # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç TimePolicy (–¥–æ–º–µ–Ω–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞)
‚îú‚îÄ‚îÄ policy.py               # üí° –û—Å–Ω–æ–≤–Ω–∞—è DomainTimePolicy –¥–æ–º–µ–Ω–∞ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏)
‚îî‚îÄ‚îÄ exceptions.py           # –ë–∏–∑–Ω–µ—Å-–∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏ (Domain Business Exceptions)
```

---

### `base.py` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–º–µ–Ω–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏

| –ö–ª–∞—Å—Å                      | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                                                                                                                          |
|----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AbsDomainTimePolicy(ABC)` | –ö–æ–Ω—Ç—Ä–∞–∫—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–∞–∑–æ–≤–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏ –¥–Ω—è –¥–ª—è –¥–æ–º–µ–Ω–∞ (—Å–ø–∏—Å–æ–∫ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–º - —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ, –∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è). <br/> –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–ª–∏ "—á–µ—Ä—Ç–µ–∂" –¥–ª—è –±—É–¥—É—â–∏—Ö –ø—Ä–∞–≤–∏–ª —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º (—ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "—Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞") |

---

### `policy.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–æ–º–µ–Ω–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏

| –ö–ª–∞—Å—Å              | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                          |
|--------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `DomainTimePolicy` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏; <br/> –ú–µ—Ç–æ–¥ `iter_domain_day_slots()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–∞–∑–æ–≤—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–æ–º–µ–Ω–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –¥–Ω—è (—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤) |

#### ‚ö†Ô∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏ –∑–∞–¥–∞–Ω—ã –≤`calendar_engine/constants.py` (DOMAIN_TIME_POLICY):

| –ü–∞—Ä–∞–º–µ—Ç—Ä                | –ó–Ω–∞—á–µ–Ω–∏–µ   |
|-------------------------|------------|
| `day_time_start`        | time(0, 0) |
| `day_time_end`          | time(0, 0) |
| `slot_duration_minutes` | 60         |

---

### `exceptions.py` - –±–∏–∑–Ω–µ—Å-–∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞ (Domain Business Exceptions)

–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è v1.0 - –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞ –±—É–¥—É—â–µ–µ –¥–ª—è
–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –æ–±—â–µ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

- –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã—Ö –¥–Ω–µ–π
- —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π
- –æ—Å–æ–±—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ç–æ–∫

–ü—Ä–∏–º–µ—Ä:

1) –ë–∞–∑–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–º–µ–Ω–∞: **—Å–ª–æ—Ç—ã –ø–æ 1 —á–∞—Å—É —Å 09:00 –¥–æ 21:00**
2) –ù–æ:
    - —Ç–æ–ª—å–∫–æ 31 –¥–µ–∫–∞–±—Ä—è ‚Üí **—Å 09:00 –¥–æ 15:00**
    - –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –¥–µ–Ω—å ‚Üí **–≤–æ–æ–±—â–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ**
    - –æ—Å–æ–±—ã–π –¥–µ–Ω—å ‚Üí **—Å–µ—Ç–∫–∞ 30 –º–∏–Ω—É—Ç**

---

## 2Ô∏è‚É£ domain/availability/ - —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞)

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- –û–ø–∏—Å–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (—Ä–∞–±–æ—á–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ) –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–∞–≤–∏–ª (–æ—Å–æ–±—ã–µ –¥–Ω–∏);
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –µ–µ –ø–æ–≤–µ—Ä—Ö –¥–æ–º–µ–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–µ—Ç–∫–∏;
- –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–±–æ—á–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞;
- –ù–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç:
    - UI
    - –ë–î
    - –∫–ª–∏–µ–Ω—Ç–æ–≤
    - Django ORM / HTTP / API

```bash
calendar_engine/domain/availability/
‚îú‚îÄ‚îÄ base.py                   # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã AvailabilityRule –∏ AvailabilityException
‚îú‚îÄ‚îÄ user_rules.py             # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ - AvailabilityRule
‚îú‚îÄ‚îÄ user_exceptions.py        # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–∞–≤–∏–ª (day-off, –æ—Ç–ø—É—Å–∫, –±–æ–ª—å–Ω–∏—á–Ω—ã–π) - AvailabilityException
‚îú‚îÄ‚îÄ dto.py                    # SlotDTO
‚îú‚îÄ‚îÄ domain_slot_generator.py  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ–º–µ–Ω–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ get_user_slots.py         # üí° –§–∏–ª—å—Ç—Ä –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ –µ–≥–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ SlotDTO, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–Ω—è)
```

---

### `base.py` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

| –ö–ª–∞—Å—Å                           | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                 |
|---------------------------------|------------------------------------------------------------------------------------------|
| `AbsAvailabilityRule(ABC)`      | –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (—Ä–∞–±–æ—á–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ) |
| `AbsAvailabilityException(ABC)` | –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞                        |

---

###
`user_rules.py` - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ (—Ä–∞–±–æ—á–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)

- –û—Ç–≤–µ—á–∞–µ—Ç –¢–û–õ–¨–ö–û –Ω–∞ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å:  
  ***‚ùù –í –∫–∞–∫–∏–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –∏ –≤ –∫–∞–∫–∏–µ —á–∞—Å—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –í –ü–†–ò–ù–¶–ò–ü–ï —Ä–∞–±–æ—Ç–∞–µ—Ç? ‚ùû***

- –≠—Ç–æ —Ä–∞–º–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:
    - –Ω–µ —Ä–µ–∂–µ—Ç —Å–ª–æ—Ç—ã
    - –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –¥–æ–º–µ–Ω–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–µ—Ç–∫—É
    - –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    - –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

- –ü—Ä–∏–º–µ—Ä:  
  ***‚ùù–Ø —Ä–∞–±–æ—Ç–∞—é: –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º –∏ —Å—Ä–µ–¥–∞–º, —Å 09:00 –¥–æ 12:00 –∏ —Å 14:00 –¥–æ 18:00‚ùû***

| –ö–ª–∞—Å—Å                    | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                          |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `WeeklyAvailabilityRule` | –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ (—Ä–∞–±–æ—á–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ); <br/> –ú–µ—Ç–æ–¥ `iter_time_windows()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ —ç—Ç–æ–≥–æ –¥–Ω—è |

---

###
`user_exceptions.py` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –≤ –µ–≥–æ —Ä–∞–±–æ—á–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ (day-off, –æ—Ç–ø—É—Å–∫, –±–æ–ª—å–Ω–∏—á–Ω—ã–π –∏ —Ç.–¥.)

- –û—Ç–≤–µ—á–∞–µ—Ç –¢–û–õ–¨–ö–û –Ω–∞ –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å:  
  ***‚ùù –ï—Å—Ç—å –ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞? ‚ùû***

- AvailabilityException –ú–û–ñ–ï–¢:
    - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—Ä–µ—Ç–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤ –¥–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π, –æ—Ç–ø—É—Å–∫)
    - –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–±–æ—á–∏–µ –æ–∫–Ω–∞ –¥–Ω—è (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –¥–µ–Ω—å, –æ—Å–æ–±—ã–π –≥—Ä–∞—Ñ–∏–∫)
    - –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ AvailabilityRule

| –ö–ª–∞—Å—Å                       | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                       |
|-----------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `DateAvailabilityException` | –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç—ã (–≤—ã—Ö–æ–¥–Ω–æ–π, –±–æ–ª—å–Ω–∏—á–Ω—ã–π); <br/> –ú–µ—Ç–æ–¥ `override_time_windows()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –¥–∞–Ω–Ω—ã–π –¥–µ–Ω—å |
| `TimeAvailabilityException` | –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –æ–∫–æ–Ω –¥–Ω—è (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –∏–ª–∏ –æ—Å–æ–±—ã–π –¥–µ–Ω—å); <br/> –ú–µ—Ç–æ–¥ `override_time_windows()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –¥–Ω—è                               |

---

### `dto.py` - —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

- ***Data Transfer Object (DTO)*** - —ç—Ç–æ –æ–±—ä–µ–∫—Ç (–∫–ª–∞—Å—Å –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞), –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  –¥–∞–Ω–Ω—ã—Ö (—á–∏—Å—Ç—ã–π transport layer) –º–µ–∂–¥—É —Å–ª–æ—è–º–∏/—á–∞—Å—Ç—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è @dataclass(frozen=True), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å DTO –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –¥–∞–Ω–Ω—ã–µ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å
  —Å–ª—É—á–∞–π–Ω–æ "–∏—Å–ø–æ—Ä—á–µ–Ω—ã" –≤ UI / API / —Å–µ—Ä–≤–∏—Å–∞–º–∏.

- DTO:
    - –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    - –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ –ë–î
    - –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

| –ö–ª–∞—Å—Å                | –û–ø–∏—Å–∞–Ω–∏–µ                                                                |
|----------------------|-------------------------------------------------------------------------|
| `SlotDTO`            | DTO-–æ–±—ä–µ–∫—Ç —Å –Ω–∞—Ä–µ–∑–∞–Ω–Ω—ã–º –¥–æ–º–µ–Ω–Ω—ã–º —Å–ª–æ—Ç–æ–º —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ–º–µ–Ω–∞ |

---

### `domain_slot_generator.py` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ–º–µ–Ω–∞

- –≠—Ç–∏ –±–∞–∑–æ–≤—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã (List[SlotDTO]) –∏ –±—É–¥—É—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –∫–∞–∂–¥–æ–º—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç:  
  - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º—É —Ä–∞–±–æ—á–µ–º—É –≥—Ä–∞—Ñ–∏–∫—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
  - —É—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (–æ—Ç–ø—É—Å–∫, –±–æ–ª—å–Ω–∏—á–Ω—ã–π, —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –¥–µ–Ω—å –∏ —Ç.–¥.)
  - —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—Ä–æ–Ω–∏/—Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞

| –ö–ª–∞—Å—Å                 | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                             |
|-----------------------|------------------------------------------------------------------------------------------------------|
| `DomainSlotGenerator` | –ú–µ—Ç–æ–¥ `generate_domain_slots()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ–º–µ–Ω–∞ |

---

### `get_user_slots.py` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –ø–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞

- –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä:
  - –±–µ—Ä–µ—Ç –¥–æ–º–µ–Ω–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–µ—Ç–∫—É
  - –ø—Ä–∏–º–µ–Ω—è–µ—Ç AvailabilityRule
  - –ø—Ä–∏–º–µ–Ω—è–µ—Ç AvailabilityException (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
  - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å—Ç—ã–π DTO –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤

- –í–ê–ñ–ù–û:
  - –∫–ª–∞—Å—Å –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–æ—Ç—ã (–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∏—Ö –ø–æ–¥ –ø—Ä–∞–≤–∏–ª–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞);
  - –∫–ª–∞—Å—Å –ù–ï –∑–Ω–∞–µ—Ç –ø—Ä–æ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–∞—Ç;
  - –∫–ª–∞—Å—Å –ù–ï –∑–Ω–∞–µ—Ç –ø—Ä–æ –ë–î, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, UI;
  - –∫–ª–∞—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û —Å –≥–æ—Ç–æ–≤—ã–º–∏ SlotDTO (—Ä–∞–Ω–µ–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã).

- –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:
  - –í–∑—è—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã AvailabilityRule –∏ AvailabilityException.

| –ö–ª–∞—Å—Å                    | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                         |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AvailabilitySlotFilter` | –§–∏–ª—å—Ç—Ä –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –ø–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞. <br/> –û–Ω –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç domain_time_policy + user_rules + user_exceptions |

---

## 3Ô∏è‚É£ domain/matching/ - –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è time_policy –∏ availability

üîπ –ö–∞–∫ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ matching, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ —Ñ–∞–∫—Ç–∞ –ø–æ
***–Ω–∞–±–æ—Ä—É —Å–ª–æ—Ç–æ–≤***, –∞ –Ω–µ –ø–æ –ø–µ—Ä–∏–æ–¥—É (—Ç–æ, –∫ —á–µ–º—É –º—ã –∏–¥–µ–º):

```text
DomainTimePolicy
  - –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
        ‚Üì
AvailabilityRule + AvailabilityException
  - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –≥—Ä–∞—Ñ–∏–∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (WeeklyAvailabilityRule.iter_time_windows)
  - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–¥–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ —Ä–∞–±–æ—á–µ–º –æ–∫–Ω–µ (–æ—Ç–ø—É—Å–∫, –±–æ–ª—å–Ω–∏—á–Ω—ã–π, —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –¥–µ–Ω—å –∏ —Ç.–¥.)
        ‚Üì
AvailabilitySlotFilter
  - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
  - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥–æ–º–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π (–æ—Ç–ø—É—Å–∫, –±–æ–ª—å–Ω–∏—á–Ω—ã–π, —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –¥–µ–Ω—å –∏ —Ç.–¥.)
  - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –¥–æ–º–µ–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±—Ä–æ–Ω–µ–π/—Å–æ–±—ã—Ç–∏–π –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
        ‚Üì
SelectedSlotsMatcher (–æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π matcher, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤—ã–±—Ä–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å–ª–æ—Ç–∞–º –≤ preferred_slots –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏ –ø–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞)
        ‚Üì
–û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º —Å–ª–æ—Ç–∞–º –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞
```

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- matching –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å:
    - ***‚ùù –ö–∞–∫–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã (—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç + —Å–ª–æ—Ç) –ø–æ–¥—Ö–æ–¥—è—Ç –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? ‚ùû***

- –ë–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á–∞ (–≤ –æ–±—â–∏—Ö —Å–ª–æ–≤–∞—Ö):  
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã -> –º—ã —Å—Ä–µ–¥–∏ —É–∂–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –æ—Å—Ç–∞–≤–ª—è–µ–º
—Ç–æ–ª—å–∫–æ —Ç–µ—Ö, —É –∫–æ–≥–æ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ —ç—Ç–∏—Ö —Å–ª–æ—Ç–æ–≤.

- matching:
    - –Ω–µ –∑–Ω–∞–µ—Ç –Ω–∏—á–µ–≥–æ –ø—Ä–æ HTTP / DRF / templates
    - –Ω–µ –∑–Ω–∞–µ—Ç –Ω–∏—á–µ–≥–æ –ø—Ä–æ –ë–î
    - –Ω–µ –∑–Ω–∞–µ—Ç –Ω–∏—á–µ–≥–æ –ø—Ä–æ UI
    - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å domain-–æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ DTO

```bash
calendar_engine/domain/matching/
‚îú‚îÄ‚îÄ dto.py           # DTO —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ matching: MatchResultDTO
‚îú‚îÄ‚îÄ base.py          # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç domain-matching –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–ª–æ—Ç–∞–º.
‚îî‚îÄ‚îÄ matcher.py       # üí° –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π matcher - –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã —É –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
```

---

### `dto.py` - —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

- ***Data Transfer Object (DTO)*** - —ç—Ç–æ –æ–±—ä–µ–∫—Ç (–∫–ª–∞—Å—Å –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞), –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  –¥–∞–Ω–Ω—ã—Ö (—á–∏—Å—Ç—ã–π transport layer) –º–µ–∂–¥—É —Å–ª–æ—è–º–∏/—á–∞—Å—Ç—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è @dataclass(frozen=True), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å DTO –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –¥–∞–Ω–Ω—ã–µ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å
  —Å–ª—É—á–∞–π–Ω–æ "–∏—Å–ø–æ—Ä—á–µ–Ω—ã" –≤ UI / API / —Å–µ—Ä–≤–∏—Å–∞–º–∏.

- DTO:
    - –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    - –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ –ë–î
    - –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –Ω–µ –∑–Ω–∞—é—Ç –ø—Ä–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

| –ö–ª–∞—Å—Å            | –û–ø–∏—Å–∞–Ω–∏–µ                       |
|------------------|--------------------------------|
| `MatchResultDTO` | DTO —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ domain-matching |

---

### `base.py` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã matching-–ª–æ–≥–∏–∫–∏

| –ö–ª–∞—Å—Å                 | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                    |
|-----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `AbsSlotMatcher(ABC)` | –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç domain-matching –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–ª–æ—Ç–∞–º. <br/> –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å matcher-–∞: 1) –ø—Ä–∏–Ω—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞; 2) –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–º —Å–ª–æ—Ç—ã; 3) –≤–µ—Ä–Ω—É—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤. |

---

### `matcher.py` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö matching'–æ–≤

| –ö–ª–∞—Å—Å                  | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `SelectedSlotsMatcher` | –≠—Ç–æ ***–æ—Å–Ω–æ–≤–Ω–æ–π*** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π matcher, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –º–µ–∂–¥—É: <br/> - –¥–æ–º–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏, —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–º–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞; <br/> - –¥–æ–º–µ–Ω–Ω—ã–º–∏ —Å–ª–æ—Ç–∞–º–∏, —è–≤–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. |

`SelectedSlotsMatcher` —ç—Ç–æ —É–∂–µ –¥–ª—è UX –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
   - **üì• –í—Ö–æ–¥**:
     - Set[SlotKey]
   - **üì§ –í—ã—Ö–æ–¥**:
     - MatchResultDTO —Ç–æ–ª—å–∫–æ —Å —Ç–µ–º–∏ —Å–ª–æ—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 
   - **üî∏ Slot-based matcher —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫**:
     - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–ª–æ—Ç—ã - —ç—Ç–æ ***set***
     - —Å–ª–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ - —ç—Ç–æ —Ç–æ–∂–µ ***set***
     - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è ***"set & set"*** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏–µ:
       - O(n) –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
       - –±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
       - –±–µ–∑ —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
       - –±–µ–∑ –ë–î
       - –±–µ–∑ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

---

## <a id="title9"> üîó –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ </a>

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- Application layer - —ç—Ç–æ:
    - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
    - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    - —Ç–æ—á–∫–∞ —Å–±–æ—Ä–∫–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–æ–±—â–∏–µ) –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è)

- Application layer:
    - ‚úÖ –∑–Ω–∞–µ—Ç –∫–∞–∫–∏–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤—ã–∑–≤–∞—Ç—å
    - ‚ùå –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
    - ‚ùå –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ HTTP / Django / DRF
    - ‚ùå –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ UI

### –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:

```text
aggregator
    ‚Üì
application/
    ‚Üì
domain/
    ‚îú‚îÄ‚îÄ time_policy/
    ‚îú‚îÄ‚îÄ availability/
    ‚îî‚îÄ‚îÄ matching/
```

---

```pgsql
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GetDomainSlotsUseCase      ‚îÇ  ‚Üê UI / Application
‚îÇ                            ‚îÇ
‚îÇ –ù–∞ –≤—ã—Ö–æ–¥–µ:                 ‚îÇ
‚îÇ   str ISO datetimes        ‚îÇ
‚îÇ   —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ –ø–æ –¥–Ω—è–º   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ≤‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚îÇ (mapping boundary)
                ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Domain / Matching / Filter ‚îÇ
‚îÇ                            ‚îÇ
‚îÇ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å:                ‚îÇ
‚îÇ   SlotDTO(day, start)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

–ü–ª–æ—Ö–æ–µ —Ä–µ—à–µ–Ω–∏–µ –±—ã–ª–æ –±—ã, –µ—Å–ª–∏ –± `domain` –Ω–∞–ø—Ä—è–º—É—é –≤—ã–∑—ã–≤–∞–ª—Å—è –±—ã —Å—Ä–∞–∑—É –∏–∑ `aggregator` –±–µ–∑ `application`:
—Å–º–µ—à–∞–ª–∏—Å—å –±—ã —Å—Ü–µ–Ω–∞—Ä–∏–∏, –ø–æ—Ç–µ—Ä—è–ª–∞—Å—å –±—ã —Ç–æ—á–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —É—Å–ª–æ–∂–Ω–∏–ª–æ—Å—å –±—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## 1Ô∏è‚É£ application/use_cases/

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- –ë–µ—Ä–µ—Ç –¥–æ–º–µ–Ω–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ–ª–∏—Ç–∏–∫—É
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç availability
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç matching
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```bash
calendar_engine/application/use_cases/
‚îú‚îÄ‚îÄ base.py                               # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –±–∞–∑–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ use-case
‚îú‚îÄ‚îÄ get_domain_slots_use_case.py          # Use-case –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç—É –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–æ–º–µ–Ω–∞ (–æ–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–º–µ–Ω–∞)
‚îî‚îÄ‚îÄ generate_and_match_availability.py    # Use-case –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ matching –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
```

---

### `base.py` - –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

| –ö–ª–∞—Å—Å             | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                            |
|-------------------|---------------------------------------------------------------------------------------------------------------------|
| `AbsUseCase(ABC)` | –ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç application use-case. Use-case: –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π, –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç DTO. |

---

### `get_domain_slots_use_case.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–∫–∞–∑ –∫–ª–∏–µ–Ω—Ç—É –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –¥–æ–º–µ–Ω–∞ (–æ–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–º–µ–Ω–∞)

| –ö–ª–∞—Å—Å                   | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                        |
|-------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `GetDomainSlotsUseCase` | Use-case –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç—É –Ω–∞ UI –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–æ–º–µ–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ (–æ–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–º–µ–Ω–∞) –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–ª–∏–∂–∞–π—à–∏—Ö –¥–Ω–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ 7 –¥–Ω–µ–π: "DAYS_AHEAD = 7"). |

---

### `generate_and_match_availability.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ matching –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞

| –ö–ª–∞—Å—Å                                 | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                                                                                                                                           |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `GenerateAndMatchAvailabilityUseCase` | Use-case –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ matching –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞. <br/> –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π: 1) –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ–∫–Ω–µ; 2) –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ matching-–ª–æ–≥–∏–∫–∏ (—á–µ—Ä–µ–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π matcher); 3) –≤–æ–∑–≤—Ä–∞—Ç –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞. |

---

## 2Ô∏è‚É£ application/mappers/

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤/—Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

```bash
calendar_engine/application/mappers/
‚îî‚îÄ‚îÄ availability_rule_mapper.py    # –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç django-–æ–±—ä–µ–∫—Ç AvailabilityRule –≤ –¥–æ–º–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
```

---

### `availability_rule_mapper.py`

| –ö–ª–∞—Å—Å                                   | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                      |
|-----------------------------------------|---------------------------------------------------------------------------------------------------------------|
| `map_availability_rule_to_domain(rule)` | –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç django-–æ–±—ä–µ–∫—Ç AvailabilityRule –≤ –¥–æ–º–µ–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏. –ë–µ–∑ —ç—Ç–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫—É. |

---

## 3Ô∏è‚É£ application/factories/

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- –ë–µ—Ä–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (**psychologist**)
- –ë–µ—Ä–µ—Ç —Å–ª–æ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–±—Ä–∞–ª –∫–ª–∏–µ–Ω—Ç (**selected_slots**)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç GenerateAndMatchAvailabilityUseCase –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç **MatchResultDTO** + —Ñ–ª–∞–≥ **has_match** (true/false)

```bash
calendar_engine/application/factories/
‚îî‚îÄ‚îÄ generate_and_match_factory.py    # üí° –ò–¢–û–ì–û–í–´–ô –ü–û–î–ë–û–† –°–ü–ï–¶–ò–ê–õ–ò–°–¢–û–í (—ç—Ç–æ composition layer, –∞ –Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –≤ use-case) - —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç use-cases, –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ "–°–ü–ï–¶–ò–ê–õ–ò–°–¢–ê + –í–´–ë–†–ê–ù–ù–´–ï –ö–õ–ò–ï–ù–¢–û–ú "–°–õ–û–¢–´" –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ü–û–î–ë–û–†
```

---

### `generate_and_match_factory.py` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ use-case –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ matching –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞

| –ö–ª–∞—Å—Å                                                             | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                   |
|-------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| `build_generate_and_match_use_case(psychologist, selected_slots)` | –°–æ–±–∏—Ä–∞–µ—Ç use-case –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ matching –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞. <br/> –ù–∞ –≤—Ö–æ–¥–µ: **psychologist** –∏ **selected_slots** –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞. |

---

## <a id="title10"> üåê –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã </a>

    ‚îú‚îÄ‚îÄ infrastructure/
    ‚îÇ    ‚îú‚îÄ‚îÄ persistence/
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ repositories.py     # ORM-–æ–±–µ—Ä—Ç–∫–∏
    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ selectors.py        # Read-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
    ‚îÇ    ‚îÇ
    ‚îÇ    ‚îú‚îÄ‚îÄ cache/                   # Redis
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ availability_cache.py
    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ keys.py
    ‚îÇ    ‚îÇ
    ‚îÇ    ‚îú‚îÄ‚îÄ tasks/                   # Celery
    ‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ reminders.py
    ‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ sync.py
    ‚îÇ    ‚îÇ
    ‚îÇ    ‚îî‚îÄ‚îÄ integrations/            # External
    ‚îÇ         ‚îú‚îÄ‚îÄ google/
    ‚îÇ         ‚îú‚îÄ‚îÄ apple/
    ‚îÇ         ‚îî‚îÄ‚îÄ outlook/

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è/–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- ...

---

## <a id="title11"> üñ•Ô∏è API –∏ WEB –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å </a>

    ‚îú‚îÄ‚îÄ api/                          # ‚≠ê DRF
    ‚îÇ    ‚îú‚îÄ‚îÄ serializers.py
    ‚îÇ    ‚îú‚îÄ‚îÄ permissions.py
    ‚îÇ    ‚îú‚îÄ‚îÄ views.py
    ‚îÇ    ‚îî‚îÄ‚îÄ urls.py
    ‚îÇ
    ‚îú‚îÄ‚îÄ web/                          # ‚≠êÔ∏è SSR (—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥) + —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
    ‚îÇ    ‚îú‚îÄ‚îÄ views.py
    ‚îÇ    ‚îú‚îÄ‚îÄ urls.py
    ‚îÇ    ‚îî‚îÄ‚îÄ templates/  

### üéØ –¶–µ–ª—å —Å–ª–æ—è:

- ...

---
