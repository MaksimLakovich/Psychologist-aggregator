{% extends 'core/base.html' %}

{% load static %}

{% block title %} {{ title_password_reset_confirm_view|default:"Новый пароль" }} {% endblock %}

{% block content %}


<section class="bg-tranceparent dark:bg-gray-900 min-h-screen flex flex-col md:flex-row">


    <!-- ========== ЛЕВАЯ ЧАСТЬ ========== -->

    <div class="w-full md:w-1/2 flex flex-col p-4 sm:p-12 md:p-4 bg-indigo-700 dark:bg-indigo-700 md:order-1 order-2">

        <!-- ========== ЛОГО (ЛЕВАЯ КОЛОНКА) ========== -->
        <div class="w-full max-w-md hidden md:flex items-center justify-between pb-1 mx-auto">
            <a href="{% url 'core:start-page' %}" class="flex mr-4">
                <img src="{% static 'images/logo/opora-logo-white.svg' %}" class="w-12 h-auto mr-0" alt="Logo_icon"/>
                <span class="text-5xl font-extrabold tracking-tight text-white sm:text-5xl">ОПОРА</span>
            </a>
        </div>

        <!-- ========== Иллюстрация ========== -->
        <div class="flex-1 flex items-center justify-center">
            <img src="{% static 'images/edit_reset_page/set-new-password.svg' %}"
                 alt="Новый пароль"
                 class="w-2/5 h-auto">
        </div>
    </div>


    <!-- ========== ПРАВАЯ ЧАСТЬ ДЛЯ ВОССТАНОВЛЕНИЯ ПАРОЛЯ ========== -->

    <div class="w-full md:w-1/2 flex flex-col items-center p-4 sm:p-12 md:p-4 dark:bg-gray-900 md:order-2 order-1">

        <!-- ========== КНОПКА НАЗАД (ПРАВАЯ КОЛОНКА) ========== -->
        <div class="w-full pb-1">
            <div class="w-full max-w-md mx-auto flex items-center justify-between md:hidden">
                <a href="{% url 'core:start-page' %}" class="flex mr-4">
                    <img src="{% static 'images/logo/opora-logo.svg' %}" class="w-12 h-auto mr-0" alt="Logo_icon"/>
                    <span class="text-5xl font-extrabold tracking-tight text-indigo-700 sm:text-5xl">ОПОРА</span>
                </a>
                <a href="{% url 'users:web:login-page' %}"
                   class="flex items-center gap-1 text-indigo-700 hover:bg-gray-100 focus:ring-4 focus:ring-indigo-300
                   font-medium rounded-lg text-base px-4 py-2 focus:outline-none">
                    <img src="{% static 'images/menu/back-icon.svg' %}" alt="Back_icon"/>
                    <span>Назад</span>
                </a>
            </div>
            <div class="w-full hidden md:flex">
                <div class="w-full max-w-md mx-auto flex justify-end">
                    <a href="{% url 'users:web:login-page' %}"
                       class="flex items-center gap-1 text-indigo-700 hover:bg-gray-100 focus:ring-4 focus:ring-indigo-300
                       font-medium rounded-lg text-base px-4 md:px-5 py-2 md:py-3 focus:outline-none">
                        <img src="{% static 'images/menu/back-icon.svg' %}" alt="Back_icon"/>
                        <span>Назад</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- ========== ВОССТАНОВЛЕНИЕ ПАРОЛЯ ========== -->
        <div class="w-full flex-1 flex items-center py-8 md:py-0">
            <div class="w-full max-w-md mx-auto">
                <h1 class="text-2xl text-center font-extrabold leading-tight tracking-wide text-zinc-400 md:text-4xl dark:text-white">
                    Новый пароль
                </h1>
                <p class="text-sm text-center text-zinc-300 dark:text-gray-400 pt-2 mb-6 md:mb-12">
                    Укажите новый пароль для входа в аккаунт
                </p>

                <!-- УВЕДОМЛЕНИЯ -->
                {% if messages %}
                <div class="space-y-2 mb-6">
                    {% for message in messages %}
                    {% if "success" in message.tags %}
                    <div class="p-3 text-center text-base tracking-wide text-green-700 bg-green-50 rounded-lg">
                        {{ message|linebreaksbr }}
                    </div>
                    {% else %}
                    <div class="p-3 text-center text-base tracking-wide text-pink-700 bg-pink-50 rounded-lg">
                        {{ message|linebreaksbr }}
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
                {% endif %}

                <!-- ОБЩИЕ ОШИБКИ -->
                {% if form.non_field_errors %}
                <div class="p-3 text-center text-base tracking-wide text-pink-700 bg-pink-50 rounded-lg mb-6">
                    {% for err in form.non_field_errors %}
                    {{ err }}{% if not forloop.last %}<br>{% endif %}
                    {% endfor %}
                </div>
                {% endif %}

                <!-- ФОРМА ДЛЯ ВОССТАНОВЛЕНИЯ ПАРОЛЯ -->
                <form class="space-y-6 pb-12" method="post">
                    {% csrf_token %}

                    <div>
                        <label for="{{ form.new_password.id_for_label }}"
                               class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                            {{ form.new_password.label }}
                        </label>
                        {{ form.new_password }}
                        {% if form.new_password.errors %}
                        <p class="mt-2 text-sm text-red-600 dark:text-red-500">
                            {{ form.new_password.errors.0 }}
                        </p>
                        {% endif %}
                    </div>

                    <div class="pb-12">
                        <label for="{{ form.new_password_confirm.id_for_label }}"
                               class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                            {{ form.new_password_confirm.label }}
                        </label>
                        {{ form.new_password_confirm }}
                        {% if form.new_password_confirm.errors %}
                        <p class="mt-2 text-sm text-red-600 dark:text-red-500">
                            {{ form.new_password_confirm.errors.0 }}
                        </p>
                        {% endif %}
                    </div>

                    <!-- Кнопка ПОДТВЕРЖДЕНИЯ -->
                    <button type="submit"
                            class="w-full text-white bg-indigo-700 hover:bg-indigo-900 focus:ring-4 focus:outline-none
                            focus:ring-primary-300 font-medium rounded-lg text-base px-6 py-3 text-center">
                        Сохранить новый пароль
                    </button>

                </form>
            </div>
        </div>
    </div>


</section>

{% endblock %}
