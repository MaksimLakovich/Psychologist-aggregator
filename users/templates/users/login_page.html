{% extends 'core/base.html' %}

{% load static %}

{% block title %} {{ title_login_page_view|default:"Вход" }} {% endblock %}

{% block content %}

{% block extra_style %}
<style>
    body {
        background-image: url('{% static "images/background/background-login.jpg" %}');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed; /* красиво фиксирует фон */
    }
</style>
{% endblock %}

<section class="bg-tranceparent dark:bg-gray-900">
    <div class="flex flex-col items-center px-6 pt-16 pb-8 mx-auto lg:pt-20 lg:pb-10">

        <div class="w-full bg-transparent rounded-lg sm:max-w-md xl:p-0 dark:bg-gray-800">
            <div class="p-6 space-y-6 sm:p-8">

                <h1 class="text-xl font-bold leading-tight tracking-wide text-gray-700 md:text-3xl dark:text-white">
                    Вход
                </h1>
                <p class="text-sm text-gray-400 dark:text-gray-400">
                    Для тех, у кого уже есть аккаунт
                </p>

                {% if messages %}
                <div class="space-y-2">
                    {% for message in messages %}
                    {% if "success" in message.tags %}
                    <div class="p-3 text-center text-base tracking-wide text-green-700 bg-green-50 rounded-lg">
                        {{ message|linebreaksbr }}
                    </div>
                    {% else %}
                    <div class="p-3 text-center text-base tracking-wide text-pink-700 bg-pink-50 rounded-lg">
                        {{ message|linebreaksbr }}
                    </div>
                    {% endif %}
                    {% endfor %}
                </div>
                {% endif %}

                <!-- Общие ошибки -->
                {% if form.non_field_errors %}
                <div class="p-3 text-center text-base tracking-wide text-pink-700 bg-pink-50 rounded-lg">
                    {% for err in form.non_field_errors %}
                    {{ err }}{% if not forloop.last %}<br>{% endif %}
                    {% endfor %}
                </div>
                {% endif %}


                <form class="space-y-4 md:space-y-6" method="post">
                    {% csrf_token %}

                    <!-- Username -->
                    <div>
                        <label for="{{ form.username.id_for_label }}"
                               class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                            {{ form.username.label }}
                        </label>
                        {{ form.username }}

                        {% if form.username.errors %}
                        <p class="mt-2 text-sm text-red-600 dark:text-red-500">
                            {{ form.username.errors.0 }}
                        </p>
                        {% endif %}
                    </div>

                    <!-- Password -->
                    <div>
                        <label for="{{ form.password.id_for_label }}"
                               class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">
                            {{ form.password.label }}
                        </label>
                        {{ form.password }}

                        {% if form.password.errors %}
                        <p class="mt-2 text-sm text-red-600 dark:text-red-500">
                            {{ form.password.errors.0 }}
                        </p>
                        {% endif %}
                    </div>

                    <!-- Remember + Forgot -->
                    <div class="flex items-center justify-between">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="remember" name="remember" type="checkbox"
                                       class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3
                              focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600">
                            </div>
                            <label for="remember" class="ml-3 text-sm text-gray-500 dark:text-gray-300">
                                Запомнить меня
                            </label>
                        </div>
                        <a href="#"
                           class="text-sm font-medium text-indigo-700 hover:underline dark:text-primary-500">
                            Забыли пароль?
                        </a>
                    </div>

                    <button type="submit"
                            class="w-full text-white bg-indigo-700 hover:bg-indigo-900 focus:ring-4 focus:outline-none
                         focus:ring-primary-300 font-medium rounded-lg text-base px-6 py-3 text-center
                         dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">
                        Войти
                    </button>

                    <p class="text-sm font-light text-gray-500 dark:text-gray-400">
                        Нет аккаунта?
                        <a href="{% url 'users:web:register-page' %}"
                           class="font-medium text-indigo-700 hover:underline dark:text-primary-500">
                            Создать аккаунт
                        </a>
                    </p>
                </form>

            </div>
        </div>

    </div>
</section>

{% endblock %}
