{% load static %}

<div class="relative inline-block text-left">

    <button type="button"
            id="user-menu-button"
            data-dropdown-toggle="dropdown"
            data-dropdown-placement="bottom-end"
            aria-expanded="false"
            class="flex items-center gap-2 px-3 py-2 mr-1 rounded-lg
            text-slate-700 hover:text-indigo-700 hover:bg-gray-100
            active:scale-95 transition-all duration-150
            dark:text-gray-300 dark:hover:text-white dark:hover:bg-gray-700">

        <span class="sr-only">Open menu</span>

        <!-- Имя пользователя -->
        <span class="text-lg font-medium tracking-wide md:text-xl">
            {{ request.user.first_name|default:"Профиль" }}
        </span>

        <!-- Стрелка вниз -->
        <svg class="w-5 h-5 transition-transform duration-200"
             xmlns="http://www.w3.org/2000/svg"
             fill="none"
             viewBox="0 0 24 24"
             stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
    </button>

    <!-- ======= МЕНЮ ======= -->
    <!-- Фон и граница окна с меню -->
    <div
            class="hidden z-50 mt-4 w-auto min-w-[22rem] border-1 border-gray-700 list-none
            md:backdrop-blur-sm backdrop-blur-md rounded-3xl divide-y-2 divide-indigo-100
            shadow-2xl shadow-indigo-500/70 dark:bg-gray-700 dark:divide-gray-600"
            id="dropdown">

        <!-- ПУНКТЫ МЕНЮ -->
        <ul class="px-1 sm:px-2 md:px-3 py-2 font-medium tracking-wide text-slate-700 dark:text-gray-400"
            aria-labelledby="dropdown">
            <li>
                <a href="{% url 'core:client-account' %}"
                   class="group flex items-center gap-4 py-2 px-2 sm:px-3 md:px-4 text-lg rounded-xl
                   transition-all duration-200 hover:bg-indigo-400/25 hover:text-indigo-700
                   dark:hover:bg-gray-600 dark:hover:text-white">
                    <img src="{% static 'images/menu/my-profile.svg' %}"
                         alt="profile"
                         class="transition-transform duration-200 group-hover:scale-110">
                    <span class="whitespace-nowrap transition-transform duration-200 group-hover:scale-105">Мой профиль</span>
                </a>
            </li>
        </ul>

        <ul class="px-1 sm:px-2 md:px-3 py-2 font-medium tracking-wide text-slate-700 dark:text-gray-400"
            aria-labelledby="dropdown">
            <li>
                <a href="{% url 'core:general-questions' %}"
                   class="group flex items-center gap-4 py-2 px-2 sm:px-3 md:px-4 text-lg rounded-xl
                   transition-all duration-200 hover:bg-indigo-400/25 hover:text-indigo-700
                   dark:hover:bg-gray-600 dark:hover:text-white">
                    <img src="{% static 'images/menu/search-user.svg' %}"
                         alt="search"
                         class="transition-transform duration-200 group-hover:scale-110">
                    <span class="whitespace-nowrap transition-transform duration-200 group-hover:scale-105">Подобрать психолога</span>
                </a>
            </li>
            <li>
                <a href="#"
                   class="group flex items-center gap-4 py-2 px-2 sm:px-3 md:px-4 text-lg rounded-xl
                   transition-all duration-200 hover:bg-indigo-400/25 hover:text-indigo-700
                   dark:hover:bg-gray-600 dark:hover:text-white">
                    <img src="{% static 'images/menu/catalog-users.svg' %}"
                         alt="catalog"
                         class="transition-transform duration-200 group-hover:scale-110">
                    <span class="whitespace-nowrap transition-transform duration-200 group-hover:scale-105">Каталог психологов</span>
                </a>
            </li>
        </ul>

        <ul class="px-1 sm:px-2 md:px-3 py-2 font-medium tracking-wide text-slate-700 dark:text-gray-400"
            aria-labelledby="dropdown">
            <li>
                <a href="#"
                   class="group flex items-center gap-4 py-2 px-2 sm:px-3 md:px-4 text-lg rounded-xl
                   transition-all duration-200 hover:bg-indigo-400/25 hover:text-indigo-700
                   dark:hover:bg-gray-600 dark:hover:text-white">
                    <img src="{% static 'images/menu/support_service.svg' %}"
                         alt="support"
                         class="transition-transform duration-200 group-hover:scale-110">
                    <span class="whitespace-nowrap transition-transform duration-200 group-hover:scale-105">Служба поддержки</span>
                </a>
            </li>
            <li>
                <a href="#"
                   class="group flex items-center gap-4 py-2 px-2 sm:px-3 md:px-4 text-lg rounded-xl
                   transition-all duration-200 hover:bg-indigo-400/25 hover:text-indigo-700
                   dark:hover:bg-gray-600 dark:hover:text-white">
                    <img src="{% static 'images/menu/question-answer.svg' %}"
                         alt="answers"
                         class="transition-transform duration-200 group-hover:scale-110">
                    <span class="whitespace-nowrap transition-transform duration-200 group-hover:scale-105">Вопросы-ответы</span>
                </a>
            </li>
        </ul>

        <!-- ВЫХОД -->
        <ul class="px-1 sm:px-2 md:px-3 py-2 font-medium tracking-wide text-slate-700 dark:text-gray-400"
            aria-labelledby="dropdown">
            <li>
                <form method="post" action="{% url 'users:web:logout' %}">
                    {% csrf_token %}
                    <button type="submit"
                            class="group gap-4 w-full flex items-center py-2 px-2 sm:px-3 md:px-4 text-lg rounded-xl
                            transition-all duration-200 hover:bg-indigo-400/25 hover:text-indigo-700
                            dark:hover:bg-gray-600 dark:hover:text-white">
                        <img src="{% static 'images/menu/logout.svg' %}"
                             alt="logout"
                             class="transition-transform duration-200 group-hover:scale-110">
                        <span class="whitespace-nowrap transition-transform duration-200 group-hover:scale-105">Выйти</span>
                    </button>
                </form>
            </li>
        </ul>

    </div>
</div>

<script type="module" src="{% static 'js/modules/menu_client_profile.js' %}"></script>
